<HTML>
<HEAD>
<META NAME="GENERATOR" Content="Microsoft Visual Studio 8.0">
<TITLE></TITLE>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
        .style1
        {
            font-family: verdana;
            font-size: 9pt;
            color: black;
        }
        .style2
        {
            width: 132px;
        }
        .style3
        {
            font-weight: normal;
        }
        .style5
        {
            width: 44px;
            text-align: center;
        }
        .style6
        {
            width: 93px;
            text-align: center;
        }
        .style7
        {
            FONT-SIZE: 9pt;
            table-layout: fixed;
            width: 11%;
            font-family: Arial;
            border-collapse: collapse;
            background-color: #FCFCFC;
        }
    </style>
</HEAD>
<BODY class="heading">
    <span class="topic">2A03/2A07 internal channels</span>
    <hr />
    <h1><span lang="sv"><span class="heading">About</span></span></h1>
    <p>
    <span class="text">
        This is the sound generator found inside the NES CPU. The NTSC version (america/japan) 
        was called 2A03 and the PAL version (europe) was called 2A07.<span lang="sv"> The difference 
        between the chips is that NTSC version runs at 1.79 MHz and 60 FPS while PAL 
        runs at 
        1.66 MHz and 50 FPS. The NSF format allows any frame rate, so it is 
        customizable from the <a href="menus.htm#Tracker">Tracker menu</a>.</span><br />
    <br />
        <span lang="sv">There are</span> five channels available: two square waves,
        one triangle wave, one noise generator and one digital sample (DPCM) channel.<br />
    </p>
    </span><span class="bold">Square 1 and 2</span><span class="text"><br />
    <p>
        Produces pulse waves with four duty settings (12.5%, 25%, 50% and 25% inverted). 
        These channels have a hardware sweep unit that can be accessed by
        <a href="effect_list.htm">H and I effects</a>.<br />
        <br />
    </span><span class="style1">Note</span><span class="text">: There is a bug that resets the duty phase when switching between 
    certain frequencies, this can be heard as a pop and might be noticable when 
    using vibrato or pitch slides across those frequencies.<br />
        <br />
    </p>
    </span><span class="bold">Triangle</span><br />
    <p>
    <span class="text">Triangle shaped waveform. There is no volume control for this channel, 
    so it will always be either on or off.<span lang="sv"> The triangle cycle period is 
        twice as long as for square channels so triangle notes will be one octave lower than 
        square notes.<br />
        </span><br />
    </p>
    </span><strong><span class="bold">Noise</span></strong><p>
        <span class="text"><span lang="sv">White no</span>ise generator. Can produce 32k-bit and 93-bit sequences, selectable
    from the instruments duty/noise setting.<span lang="sv"> There are only 16 different 
        pitches available, so a pitch value instead of notes &amp; octaves is displayed.<br />
        </span><br />
    </p>
    </span><strong><span class="bold">DPCM (Delta PCM)</span></strong><p>
        <span class="text">Used to play delta modulated samples. <span lang="sv">Channel 
        </span>effects (<span lang="sv">volume,</span> arpeggio &amp; pitch slides) do<span 
            lang="sv">es</span> 
    not<span lang="sv"> work </span>on this channel.<span lang="sv"> The volume column has no effect on this 
        channel.</span></span></p>
    <p>
    <span class="bold">Note</span><span class="text">: Due to the way the sound is mixed in the hardware, the volume level 
    of triangle and noise channels will be affected <span lang="sv">by</span> the DPCM channel.<span 
            lang="sv"> More info is available on the bottom of this page.<br />
        </span></p>
    </span>
    <hr />
    <h1>
        <span class="heading"><a name="Instruments">Instruments</a></span></h1>
<p class="text">
        The 2A03 instruments contains a combination of parameters for the 
        waveform channels and a set of samples for the DPCM channel.<span lang="sv"> 
        Press ESC to close the instrument editor.</span></p>
<p class="text">
    <b class="bold">2A03 settings</b></p>
    


<p class="text">
    <strong>
				<IMG id="IMG1" style="FONT-SIZE: 10pt" src="img/inst_2a03.png" alt=""></strong></p>
<p class="text">
    This part of the instrument is only used by the wave channels of 2A03 (square, triangle and 
    noise). The idea is based on the MML style, where a set of sequences are 
    used to program the channels. A sequence is a list of values that are applied to the channel at the same rate as the frame rate, shown in the main window. Default for NTSC is 60 FPS and PAL is 50 FPS.<span 
        lang="sv"> As shown in the example, 30 items takes 500 ms to run when 
    using 60 FPS.</span></p>
<p class="text">
    These effects are available (none applies to the DPCM channel)</p>
            <table class="text">
                <tr>
                    <td class="style2" valign="top">
                        <span class="gray">Volume</span></td>
                    <td>
                        <span style="font-size: 9pt">
			Channel amplitude.
			is not possible to change triangle volume, but a zero will disable the 
			channel and non-zero will enable it.
			<br>
			Range: <b>0</b> to <b>15
                        </b>(volume units)<br />
                        </span></td>
                </tr>
                <tr>
                    <td class="style2" valign="top">
                        <span class="gray">Arpeggio</span></td>
                    <td>
                        <span lang="sv">Used for</span> note-shifting, commonly used to simulate chords.
			<br>
			Range: <b>-79</b> to <b>+79<span lang="sv"> </span> </b><span lang="sv">(notes)</span><br />
                        <br />
		            </td>
                </tr>
                <tr>
                    <td class="style2" valign="top">
                        <span class="gray">Pitch bend &amp; High-speed pitch bend</span><br />
                    </td>
                    <td valign="top">
                        <span lang="sv">Affects</span> the pitch, Hi-pitch multiplies the value by 
                        16.<br />
                        Range: <b>-127</b> to <b>126<span lang="sv"> </span>
                        </b>
		                <span lang="sv">(pitch units)<br />
                        </span><br />
		            </td>
                </tr>
                <tr>
                    <td class="style2" valign="top">
                        <span class="gray">Duty cycle / noise mode</span></td>
                    <td>
            Sets the duty <span lang="sv">cycle period</span> and noise mode.<br>
			            <span class="gray">Square:</span> <b>0 = 12.5%</b>, <b>1 = 25%</b>,<b> 2 = 50%</b>, <b>3 = 75% </b>
			            (pulse width)<br>
			            <span class="gray">Noise: </span> <b>0 = 32k-bit mode</b>, <b>1 = 93-bit mode</b>
                        <br />
                        Triangle channel is unaffected.<br />
		            </td>
                </tr>
            </table>
	        
<p class="text">
    Sequences are defined in the graphical sequence editor, where you can draw with 
    the mouse (right-click to draw lines) or directly edit<span lang="sv"> the 
    values</span> in the text box. Left 
    click the bottom part to set a loop point and right click to set a release 
    point.</p>
<p class="text">
    A loop point causes the sequence to loop and a release points will hold the 
    sequence until a release command.<span lang="sv"> </span>The loop point is defined as a &#39;|&#39; and release point as &#39;/&#39; in the text 
    <span lang="sv">string</span>.</p>
    <hr />
<p class="text">
    <b class="bold">DPCM samples</b></p>
<p class="text">
            <STRONG style="font-weight: 700">
			<IMG id="IMG2" style="FONT-SIZE: 10pt" src="img/inst_dpcm.png" alt=""></STRONG></p>
<p class="text">
    This tab is used to assign samples for the DPCM channel, <span lang="sv">it 
    does not affect the wave channels</span>. Assigned samples are samples assigned in 
    <span lang="sv">the selected </span>instrument while 
    loaded samples are global for all instruments.</p>
    <p class="text">
        <span lang="sv"><b>Load:</b> load samples from files. The format must be 1-bit 
        delta PCM and max size can be 4081 bytes.</span></p>
    <p class="style1">
        <span lang="sv">Unload: <span class="style3">Remove selected sample.</span></span></p>
    <p class="style1">
        <span lang="sv">Save: <span class="style3">Saves selected sample to a file.</span></span></p>
    <p class="style1">
        <span lang="sv">Import: <span class="style3">Load and convert PCM files to delta 
        PCM.
    <a href="dpcm_import.htm">See more info about importing PCM.</a></span></span></p>
    <p class="style1">
        <span lang="sv">Edit: <span class="style3">Opens a DPCM editor, read about it
    <a href="dpcm_editor.htm">here</a>.</span></span></p>
    <p class="style1">
        <span lang="sv">Preview: <span class="style3">Plays the sample.</span></span></p>
    


<p class="text">
            <span lang="sv">The available space</span> for DPCM samples<span lang="sv"> is 
            16 kB</span>.
			<span lang="sv">S</span>elect a key in &quot;Assigned samples&quot;-box and select the sample from the 
            drop-down box below<span lang="sv"> (or right click in the list)</span>. The pitch box&nbsp;sets the&nbsp;pitch for the sample (15 - 
            0).
            The &quot;<b>&lt;-</b>&quot;<span lang="sv">-button</span> can also be used to assign samples, and &quot;<b>-&gt;</b>&quot;<span 
                lang="sv">-button</span> to remove assigned 
            samples.<span lang="sv"> Loop is used to loop the sample from beginning.</span></p>
    <p class="text">
            <span lang="sv">The pitch setting translates to a frequency according to the 
            following table:</span></p>
    <table class="style7">
        <tr>
            <td class="style5">
                <span lang="sv">0</span></td>
            <td class="style6">
                4181.71 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                    <span lang="sv">1</span>
            </td>
            <td class="style6">
                4709.93 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                <span lang="sv">2</span></td>
            <td class="style6">
                5264.04 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                    <span lang="sv">3</span>
            </td>
            <td class="style6">
                5593.04 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                    <span lang="sv">4</span>
            </td>
            <td class="style6">
                    6257.95 Hz
            </td>
        </tr>
        <tr>
            <td class="style5">
                <span lang="sv">5</span></td>
            <td class="style6">
                7046.35 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                <span lang="sv">6</span></td>
            <td class="style6">
                7919.35 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                <span lang="sv">7</span></td>
            <td class="style6">
                8363.42 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                <span lang="sv">8</span></td>
            <td class="style6">
                9419.86 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                <span lang="sv">9</span></td>
            <td class="style6">
                11,186.08 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                <span lang="sv">10</span></td>
            <td class="style6">
                12,604.03 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                <span lang="sv">11</span></td>
            <td class="style6">
                13,982.60 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                <span lang="sv">12</span></td>
            <td class="style6">
                16,884.65 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                <span lang="sv">13</span></td>
            <td class="style6">
                21,306.82 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                <span lang="sv">14</span></td>
            <td class="style6">
                24,857.95 Hz</td>
        </tr>
        <tr>
            <td class="style5">
                <span lang="sv">15</span></td>
            <td class="style6">
                33,143.94 Hz</td>
        </tr>
    </table>
<p class="text">
            <STRONG>Note: 
            </STRONG>Playing a DPCM sample may decrease the volume level of triangle and 
            noise. If full volume isn&#39;t regained after a sample is finished, use a note stop 
            or the Z-effect in the DPCM channel to restore it.<span lang="sv"> You can check 
            the <a href="menus.htm#Tracker">Tracker/Display DPCM</a> state menu item to 
            display the current value of the DPCM 
            delta counter, a high value results in lower volume output.</span>
    


</BODY>
</HTML>
